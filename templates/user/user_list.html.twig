{% extends 'base.html.twig' %}

{% block header_img %}{% endblock %}

{% block header_title %}<h1>Liste des utilisateurs</h1>{% endblock %}

{% block body %}
    {% if users|length == 0 %}
        <div class="alert alert-warning" role="alert">
            Il n'y a pas encore d'utilisateur enregistré. <a href="{{ path('users_create') }}" class="btn btn-warning pull-right">Créer un utilisateur</a>
        </div>
    {% else %}
        <div class="row">
            <table class="table">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Nom d'utilisateur</th>
                    <th>Adresse d'utilisateur</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for user in users.data %}
                    <tr class="user">
                        <th scope="row">{{ user.id }}</th>
                        <td>{{ user.username }}</td>
                        <td>{{ user.email }}</td>
                        <td>
                            <a href="{{ path('users_edit', {'id' : user.id}) }}" class="btn btn-success btn-sm">Edit</a>
                            <a onclick="return confirm('Es-tu sûr de vouloir supprimer cet utilisateur ?')"
                                href="{{ path('users_delete', {'id': user.id}) }}" class="btn btn-danger btn-sm"
                                title="Suppression de l\'utilisateur"> 
                                <i id="trash-icon" class="fa-solid fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>

            {% set path = 'users_list' %}
            {% set pages = users.pages %}
            {% set currentPage = app.request.get('page') %}
            {% include 'partials/pagination.html.twig' %}
            
        </div>
    {% endif %}
{% endblock %}
